{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Modal from\"react-native-web/dist/exports/Modal\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Alert from\"react-native-web/dist/exports/Alert\";import Button from'./Button';import{useTheme}from'../contexts/ThemeContext';import*as MailComposer from'expo-mail-composer';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var BackupModal=function BackupModal(_ref){var visible=_ref.visible,walletData=_ref.walletData,onComplete=_ref.onComplete;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useTheme=useTheme(),colors=_useTheme.colors;var handleEmailBackup=function(){var _ref2=_asyncToGenerator(function*(){if(email){var isAvailable=yield MailComposer.isAvailableAsync();if(isAvailable){try{var result=yield MailComposer.composeAsync({recipients:[email],subject:'Your Wallet Backup',body:JSON.stringify(walletData,null,2)});if(result.status==='sent'){Alert.alert('Success','Backup sent successfully');onComplete(true,email);}else{Alert.alert('Error','Failed to send backup email');onComplete(false,email);}}catch(error){console.error('Email composition error:',error);Alert.alert('Error','Failed to compose backup email');onComplete(false,email);}}else{Alert.alert('Error','Email is not available on this device');onComplete(false,email);}}else{onComplete(false,null);}});return function handleEmailBackup(){return _ref2.apply(this,arguments);};}();return _jsx(Modal,{visible:visible,transparent:true,animationType:\"slide\",children:_jsxs(View,{style:[styles.modalContainer,{backgroundColor:colors.background}],children:[_jsx(Text,{style:[styles.title,{color:colors.text}],children:\"Backup Your Wallet\"}),_jsx(Text,{style:[styles.description,{color:colors.text}],children:\"Enter an email address to backup your wallet data (recommended):\"}),_jsx(TextInput,{style:[styles.input,{color:colors.text,borderColor:colors.border}],placeholder:\"Enter your email (optional)\",placeholderTextColor:colors.placeholder,value:email,onChangeText:setEmail,keyboardType:\"email-address\"}),_jsx(Button,{title:\"Complete Setup\",onPress:handleEmailBackup})]})});};var styles=StyleSheet.create({modalContainer:{flex:1,justifyContent:'center',alignItems:'center',padding:20},title:{fontSize:24,fontWeight:'bold',marginBottom:20},description:{fontSize:16,marginBottom:20,textAlign:'center'},input:{width:'100%',height:40,borderWidth:1,borderRadius:5,paddingHorizontal:10,marginBottom:20},skipButton:{marginTop:10,backgroundColor:'gray'}});export default BackupModal;","map":{"version":3,"names":["React","useState","View","Text","StyleSheet","Modal","TextInput","Alert","Button","useTheme","MailComposer","jsx","_jsx","jsxs","_jsxs","BackupModal","_ref","visible","walletData","onComplete","_useState","_useState2","_slicedToArray","email","setEmail","_useTheme","colors","handleEmailBackup","_ref2","_asyncToGenerator","isAvailable","isAvailableAsync","result","composeAsync","recipients","subject","body","JSON","stringify","status","alert","error","console","apply","arguments","transparent","animationType","children","style","styles","modalContainer","backgroundColor","background","title","color","text","description","input","borderColor","border","placeholder","placeholderTextColor","value","onChangeText","keyboardType","onPress","create","flex","justifyContent","alignItems","padding","fontSize","fontWeight","marginBottom","textAlign","width","height","borderWidth","borderRadius","paddingHorizontal","skipButton","marginTop"],"sources":["C:/appdev/btcwallet/src/components/BackupModal.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { View, Text, StyleSheet, Modal, TextInput, Alert } from 'react-native';\r\nimport Button from './Button';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\nimport * as MailComposer from 'expo-mail-composer';\r\n\r\nconst BackupModal = ({ visible, walletData, onComplete }) => {\r\n  const [email, setEmail] = useState('');\r\n  const { colors } = useTheme();\r\n\r\n  const handleEmailBackup = async () => {\r\n    if (email) {\r\n      const isAvailable = await MailComposer.isAvailableAsync();\r\n      if (isAvailable) {\r\n        try {\r\n          const result = await MailComposer.composeAsync({\r\n            recipients: [email],\r\n            subject: 'Your Wallet Backup',\r\n            body: JSON.stringify(walletData, null, 2),\r\n          });\r\n\r\n          if (result.status === 'sent') {\r\n            Alert.alert('Success', 'Backup sent successfully');\r\n            onComplete(true, email);\r\n          } else {\r\n            Alert.alert('Error', 'Failed to send backup email');\r\n            onComplete(false, email);\r\n          }\r\n        } catch (error) {\r\n          console.error('Email composition error:', error);\r\n          Alert.alert('Error', 'Failed to compose backup email');\r\n          onComplete(false, email);\r\n        }\r\n      } else {\r\n        Alert.alert('Error', 'Email is not available on this device');\r\n        onComplete(false, email);\r\n      }\r\n    } else {\r\n      // If no email is provided, just complete without backup\r\n      onComplete(false, null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal visible={visible} transparent animationType=\"slide\">\r\n      <View style={[styles.modalContainer, { backgroundColor: colors.background }]}>\r\n        <Text style={[styles.title, { color: colors.text }]}>Backup Your Wallet</Text>\r\n        <Text style={[styles.description, { color: colors.text }]}>\r\n          Enter an email address to backup your wallet data (recommended):\r\n        </Text>\r\n        <TextInput\r\n          style={[styles.input, { color: colors.text, borderColor: colors.border }]}\r\n          placeholder=\"Enter your email (optional)\"\r\n          placeholderTextColor={colors.placeholder}\r\n          value={email}\r\n          onChangeText={setEmail}\r\n          keyboardType=\"email-address\"\r\n        />\r\n        <Button title=\"Complete Setup\" onPress={handleEmailBackup} />\r\n      </View>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  modalContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 20,\r\n  },\r\n  title: {\r\n    fontSize: 24,\r\n    fontWeight: 'bold',\r\n    marginBottom: 20,\r\n  },\r\n  description: {\r\n    fontSize: 16,\r\n    marginBottom: 20,\r\n    textAlign: 'center',\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    height: 40,\r\n    borderWidth: 1,\r\n    borderRadius: 5,\r\n    paddingHorizontal: 10,\r\n    marginBottom: 20,\r\n  },\r\n  skipButton: {\r\n    marginTop: 10,\r\n    backgroundColor: 'gray',\r\n  },\r\n});\r\n\r\nexport default BackupModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}