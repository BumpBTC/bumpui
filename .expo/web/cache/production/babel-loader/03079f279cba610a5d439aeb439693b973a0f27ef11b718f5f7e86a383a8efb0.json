{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"type\",\"poster\"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import{CodedError}from'expo-modules-core';import*as React from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import createElement from'react-native-web/dist/exports/createElement';import CameraManager from'./ExpoCameraManager.web';import{CameraType}from'./legacy/Camera.types';import{capture}from'./web/WebCameraUtils';import{PictureSizes}from'./web/WebConstants';import{useWebCameraStream}from'./web/useWebCameraStream';import{useWebQRScanner}from'./web/useWebQRScanner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var ExponentCamera=React.forwardRef(function(_ref,ref){var _props$barCodeScanner3,_props$barCodeScanner4;var type=_ref.type,poster=_ref.poster,props=_objectWithoutProperties(_ref,_excluded);var video=React.useRef(null);var native=useWebCameraStream(video,type,props,{onCameraReady:function onCameraReady(){if(props.onCameraReady){props.onCameraReady();}},onMountError:props.onMountError});var isQRScannerEnabled=React.useMemo(function(){var _props$barCodeScanner,_props$barCodeScanner2;return!!((_props$barCodeScanner=props.barCodeScannerSettings)!=null&&(_props$barCodeScanner2=_props$barCodeScanner.barCodeTypes)!=null&&_props$barCodeScanner2.includes('qr')&&!!props.onBarCodeScanned);},[(_props$barCodeScanner3=props.barCodeScannerSettings)==null?void 0:_props$barCodeScanner3.barCodeTypes,props.onBarCodeScanned]);useWebQRScanner(video,{interval:(_props$barCodeScanner4=props.barCodeScannerSettings)==null?void 0:_props$barCodeScanner4.interval,isEnabled:isQRScannerEnabled,captureOptions:{scale:1,isImageMirror:native.type===CameraType.front},onScanned:function onScanned(event){if(props.onBarCodeScanned){props.onBarCodeScanned(event);}}});React.useImperativeHandle(ref,function(){return{getAvailablePictureSizes:function(){var _getAvailablePictureSizes=_asyncToGenerator(function*(ratio){return PictureSizes;});function getAvailablePictureSizes(_x){return _getAvailablePictureSizes.apply(this,arguments);}return getAvailablePictureSizes;}(),takePicture:function(){var _takePicture=_asyncToGenerator(function*(options){var _video$current,_video$current2;if(!video.current||((_video$current=video.current)==null?void 0:_video$current.readyState)!==((_video$current2=video.current)==null?void 0:_video$current2.HAVE_ENOUGH_DATA)){throw new CodedError('ERR_CAMERA_NOT_READY','HTMLVideoElement does not have enough camera data to construct an image yet.');}var settings=native.mediaTrackSettings;if(!settings){throw new CodedError('ERR_CAMERA_NOT_READY','MediaStream is not ready yet.');}return capture(video.current,settings,_objectSpread(_objectSpread({},options),{},{onPictureSaved:function onPictureSaved(picture){if(options.onPictureSaved){options.onPictureSaved(picture);}if(props.onPictureSaved){props.onPictureSaved({nativeEvent:{data:picture,id:-1}});}}}));});function takePicture(_x2){return _takePicture.apply(this,arguments);}return takePicture;}(),resumePreview:function(){var _resumePreview=_asyncToGenerator(function*(){if(video.current){video.current.play();}});function resumePreview(){return _resumePreview.apply(this,arguments);}return resumePreview;}(),pausePreview:function(){var _pausePreview=_asyncToGenerator(function*(){if(video.current){video.current.pause();}});function pausePreview(){return _pausePreview.apply(this,arguments);}return pausePreview;}()};},[native.mediaTrackSettings,props.onPictureSaved]);var isMuted=true;var style=React.useMemo(function(){var isFrontFacingCamera=native.type===CameraManager.Type.front;return[StyleSheet.absoluteFill,styles.video,{transform:isFrontFacingCamera?[{scaleX:-1}]:undefined}];},[native.type]);return _jsxs(View,{pointerEvents:\"box-none\",style:[styles.videoWrapper,props.style],children:[_jsx(Video,{autoPlay:true,playsInline:true,muted:isMuted,poster:poster,pointerEvents:props.pointerEvents,ref:video,style:style}),props.children]});});export default ExponentCamera;var Video=React.forwardRef(function(props,ref){return createElement('video',_objectSpread(_objectSpread({},props),{},{ref:ref}));});var styles=StyleSheet.create({videoWrapper:{flex:1,alignItems:'stretch'},video:{width:'100%',height:'100%',objectFit:'cover'}});","map":{"version":3,"names":["CodedError","React","StyleSheet","View","createElement","CameraManager","CameraType","capture","PictureSizes","useWebCameraStream","useWebQRScanner","jsx","_jsx","jsxs","_jsxs","ExponentCamera","forwardRef","_ref","ref","_props$barCodeScanner3","_props$barCodeScanner4","type","poster","props","_objectWithoutProperties","_excluded","video","useRef","native","onCameraReady","onMountError","isQRScannerEnabled","useMemo","_props$barCodeScanner","_props$barCodeScanner2","barCodeScannerSettings","barCodeTypes","includes","onBarCodeScanned","interval","isEnabled","captureOptions","scale","isImageMirror","front","onScanned","event","useImperativeHandle","getAvailablePictureSizes","_getAvailablePictureSizes","_asyncToGenerator","ratio","_x","apply","arguments","takePicture","_takePicture","options","_video$current","_video$current2","current","readyState","HAVE_ENOUGH_DATA","settings","mediaTrackSettings","_objectSpread","onPictureSaved","picture","nativeEvent","data","id","_x2","resumePreview","_resumePreview","play","pausePreview","_pausePreview","pause","isMuted","style","isFrontFacingCamera","Type","absoluteFill","styles","transform","scaleX","undefined","pointerEvents","videoWrapper","children","Video","autoPlay","playsInline","muted","create","flex","alignItems","width","height","objectFit"],"sources":["C:\\appdev\\btcwallet\\src\\node_modules\\expo-camera\\src\\ExpoCamera.web.tsx"],"sourcesContent":["import { CodedError } from 'expo-modules-core';\nimport * as React from 'react';\nimport { StyleProp, StyleSheet, View, ViewStyle } from 'react-native';\nimport createElement from 'react-native-web/dist/exports/createElement';\n\nimport CameraManager from './ExpoCameraManager.web';\nimport {\n  CameraCapturedPicture,\n  CameraNativeProps,\n  CameraPictureOptions,\n  CameraType,\n} from './legacy/Camera.types';\nimport { capture } from './web/WebCameraUtils';\nimport { PictureSizes } from './web/WebConstants';\nimport { useWebCameraStream } from './web/useWebCameraStream';\nimport { useWebQRScanner } from './web/useWebQRScanner';\n\nexport interface ExponentCameraRef {\n  getAvailablePictureSizes: (ratio: string) => Promise<string[]>;\n  takePicture: (options: CameraPictureOptions) => Promise<CameraCapturedPicture>;\n  resumePreview: () => Promise<void>;\n  pausePreview: () => Promise<void>;\n}\n\nconst ExponentCamera = React.forwardRef(\n  (\n    { type, poster, ...props }: CameraNativeProps & { children?: React.ReactNode },\n    ref: React.Ref<ExponentCameraRef>\n  ) => {\n    const video = React.useRef<HTMLVideoElement | null>(null);\n\n    const native = useWebCameraStream(video, type as CameraType, props, {\n      onCameraReady() {\n        if (props.onCameraReady) {\n          props.onCameraReady();\n        }\n      },\n      onMountError: props.onMountError,\n    });\n\n    const isQRScannerEnabled = React.useMemo<boolean>(() => {\n      return !!(\n        props.barCodeScannerSettings?.barCodeTypes?.includes('qr') && !!props.onBarCodeScanned\n      );\n    }, [props.barCodeScannerSettings?.barCodeTypes, props.onBarCodeScanned]);\n\n    useWebQRScanner(video, {\n      interval: props.barCodeScannerSettings?.interval,\n      isEnabled: isQRScannerEnabled,\n      captureOptions: { scale: 1, isImageMirror: native.type === CameraType.front },\n      onScanned(event) {\n        if (props.onBarCodeScanned) {\n          props.onBarCodeScanned(event);\n        }\n      },\n      // onError: props.onMountError,\n    });\n\n    // const [pause, setPaused]\n\n    React.useImperativeHandle(\n      ref,\n      () => ({\n        async getAvailablePictureSizes(ratio: string): Promise<string[]> {\n          return PictureSizes;\n        },\n        async takePicture(options: CameraPictureOptions): Promise<CameraCapturedPicture> {\n          if (!video.current || video.current?.readyState !== video.current?.HAVE_ENOUGH_DATA) {\n            throw new CodedError(\n              'ERR_CAMERA_NOT_READY',\n              'HTMLVideoElement does not have enough camera data to construct an image yet.'\n            );\n          }\n          const settings = native.mediaTrackSettings;\n          if (!settings) {\n            throw new CodedError('ERR_CAMERA_NOT_READY', 'MediaStream is not ready yet.');\n          }\n\n          return capture(video.current, settings, {\n            ...options,\n            // This will always be defined, the option gets added to a queue in the upper-level. We should replace the original so it isn't called twice.\n            onPictureSaved(picture) {\n              if (options.onPictureSaved) {\n                options.onPictureSaved(picture);\n              }\n              if (props.onPictureSaved) {\n                props.onPictureSaved({ nativeEvent: { data: picture, id: -1 } });\n              }\n            },\n          });\n        },\n        async resumePreview(): Promise<void> {\n          if (video.current) {\n            video.current.play();\n          }\n        },\n        async pausePreview(): Promise<void> {\n          if (video.current) {\n            video.current.pause();\n          }\n        },\n      }),\n      [native.mediaTrackSettings, props.onPictureSaved]\n    );\n\n    // TODO(Bacon): Create a universal prop, on native the microphone is only used when recording videos.\n    // Because we don't support recording video in the browser we don't need the user to give microphone permissions.\n    const isMuted = true;\n\n    const style = React.useMemo<StyleProp<ViewStyle>>(() => {\n      const isFrontFacingCamera = native.type === CameraManager.Type.front;\n      return [\n        StyleSheet.absoluteFill,\n        styles.video,\n        {\n          // Flip the camera\n          transform: isFrontFacingCamera ? [{ scaleX: -1 }] : undefined,\n        },\n      ];\n    }, [native.type]);\n\n    return (\n      <View pointerEvents=\"box-none\" style={[styles.videoWrapper, props.style]}>\n        <Video\n          autoPlay\n          playsInline\n          muted={isMuted}\n          poster={poster}\n          // webkitPlaysinline\n          pointerEvents={props.pointerEvents}\n          ref={video}\n          style={style}\n        />\n        {props.children}\n      </View>\n    );\n  }\n);\n\nexport default ExponentCamera;\n\nconst Video = React.forwardRef(\n  (\n    props: React.ComponentProps<typeof View> & {\n      autoPlay?: boolean;\n      playsInline?: boolean;\n      muted?: boolean;\n      poster?: string;\n    },\n    ref: React.Ref<HTMLVideoElement>\n  ) => createElement('video', { ...props, ref })\n);\n\nconst styles = StyleSheet.create({\n  videoWrapper: {\n    flex: 1,\n    alignItems: 'stretch',\n  },\n  video: {\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover',\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}